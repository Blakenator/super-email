---
description: Testing conventions and requirements
globs: "**/*.test.ts"
alwaysApply: false
---

# Testing Requirements

- **All new GraphQL queries/mutations MUST have corresponding tests**
- **All new helper functions in `backend/helpers/` MUST have unit tests**

## File Naming

| Type | Pattern | Use Case |
|------|---------|----------|
| Unit | `*.unit.test.ts` | Pure functions, helpers, utilities |
| Integration | `*.integration.test.ts` | GraphQL operations, DB interactions |

## Commands

```bash
pnpm test              # All tests
pnpm test:unit         # Unit tests only
pnpm test:integration  # Integration tests only
```

## Integration Tests

- Use the shared test server in `test/integration/server-setup.ts`
- Tests share a single server instance across all test files

## Anti-Pattern Warning

When modifying tests, verify they actually test real functionality. Avoid:
1. Creating a mock
2. Calling the mock
3. Testing the mock was called

...without ever testing the actual function/endpoint.
